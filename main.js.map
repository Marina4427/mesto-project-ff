{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project-ff/./src/components/modal.js","webpack://mesto-project-ff/./src/components/card.js","webpack://mesto-project-ff/./src/components/validation.js","webpack://mesto-project-ff/./src/components/api.js","webpack://mesto-project-ff/./src/index.js"],"sourcesContent":["//закрытие на крестик\nfunction closePopupByCross(evt) {\n  const button = evt.target;\n  const popup = button.closest(\".popup\");\n  closePopup(popup);\n}\n//закрыть попап по Escape\nfunction closePopupByEscape(event) {\n  if (event.key === \"Escape\") {\n    closePopup(document.querySelector(\".popup_is-opened\"));\n  }\n}\n//закрыть попап щелчком на оверлее\nfunction closePopupOverlay(evt) {\n  if (evt.target.classList.contains(\"popup_is-opened\")) {\n    closePopup(evt.target);\n  }\n}\nfunction closePopup(element) {\n  element.classList.remove(\"popup_is-opened\");\n  document.removeEventListener(\"keydown\", closePopupByEscape);\n  document.removeEventListener(\"click\", closePopupOverlay);\n  const popupCloseButton = element.querySelector(\".popup__close\");\n  popupCloseButton.removeEventListener(\"click\", closePopupByCross);\n}\nfunction openPopup(element) {\n  element.classList.add(\"popup_is-opened\");\n  document.addEventListener(\"keydown\", closePopupByEscape);\n  document.addEventListener(\"click\", closePopupOverlay);\n  const popupCloseButton = element.querySelector(\".popup__close\");\n  popupCloseButton.addEventListener(\"click\", closePopupByCross);\n}\nexport { openPopup, closePopup };\n","export function putLike(\n  likeButton,\n  item,\n  likeCounter,\n  deleteLikeCard,\n  addLikeCard\n) {\n  if (likeButton.classList.contains(\"card__like-button_is-active\")) {\n    // Пользователю уже понравилась карточка, поэтому выполните операцию \"не нравится\".\n    deleteLikeCard(item._id)\n      .then((res) => {\n        likeCounter.textContent = res.likes.length;\n        likeButton.classList.remove(\"card__like-button_is-active\");\n      })\n      .catch((err) => {\n        console.error(\"Произошла ошибка при удалении лайка:\", err);\n      });\n  } else {\n    addLikeCard(item._id)\n      .then((res) => {\n        likeButton.classList.add(\"card__like-button_is-active\");\n        likeCounter.textContent = res.likes.length;\n      })\n      .catch((err) => {\n        console.error(\"Произошла ошибка при добавлении лайка:\", err);\n      });\n  }\n}\n\nexport function createCard(item, callbacksObject, userId) {\n  const {\n    openImageCallback,\n    likeCallback,\n    openDeletePopupCallBack,\n    deleteLikeCard,\n    addLikeCard,\n  } = callbacksObject;\n\n  const cardTemplate = document.querySelector(\"#card-template\").content;\n  const cardElement = cardTemplate.querySelector(\".card\").cloneNode(true);\n  const cardImage = cardElement.querySelector(\".card__image\");\n  const cardTitle = cardElement.querySelector(\".card__title\");\n  const likeCounter = cardElement.querySelector(\".card__like-counter\");\n  const cardDeleteButton = cardElement.querySelector(\".card__delete-button\");\n  const likeButton = cardElement.querySelector(\".card__like-button\");\n\n  cardTitle.textContent = item.name;\n  cardImage.src = item.link;\n  cardImage.alt = item.name;\n  likeCounter.textContent = item.likes.length;\n\n  let isLike = item.likes.some((likeItem) => likeItem._id === userId);\n\n  if (isLike) {\n    likeButton.classList.add(\"card__like-button_is-active\");\n  } else {\n    likeButton.classList.remove(\"card__like-button_is-active\");\n  }\n\n  // basket\n  cardDeleteButton.style.display = item.owner._id === userId ? \"block\" : \"none\";\n\n  // @todo: слушатель удаления карточки\n  cardDeleteButton.addEventListener(\"click\", () => {\n    openDeletePopupCallBack(cardElement, item._id);\n  });\n\n  //слушатель лайка\n  likeButton.addEventListener(\"click\", () => {\n    likeCallback(likeButton, item, likeCounter, deleteLikeCard, addLikeCard);\n  });\n\n  // Слушатель добавления картинки\n  cardImage.addEventListener(\"click\", () => {\n    openImageCallback(item.name, item.link);\n  });\n  return cardElement;\n}\n","export const validationConfig = {\n    formSelector: '.popup__form',\n    inputSelector: '.popup__input',\n    submitButtonSelector: '.popup__button',\n    inactiveButtonClass: 'popup__button_disabled',\n    inputErrorClass: 'popup__input_type_error',\n    errorClass: 'popup__error_visible'\n  };\n\nconst showInputError = (formElement, inputElement, validationConfig) => {\n    const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\n    inputElement.classList.add(validationConfig.inputErrorClass);\n    errorElement.classList.add(validationConfig.errorClass);\n    errorElement.textContent = inputElement.validationMessage;\n  };\n\nexport const hideInputError = (formElement, inputElement, validationConfig) => {\n    const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\n    inputElement.classList.remove(validationConfig.inputErrorClass);\n    errorElement.classList.remove(validationConfig.errorClass);\n    errorElement.textContent = \"\";\n  };\n\n  // Проверить, есть ли хотя бы одно невалидное поле\n  const hasInvalidInput = (inputList) => {\n    return inputList.some((inputElement) => {\n      return !inputElement.validity.valid;\n    });\n  };\n\n  function toggleButtonState (inputList, buttonElement, validationConfig) {\n    if (hasInvalidInput(inputList, validationConfig)) {\n      buttonElement.setAttribute(\"disabled\", true);\n      buttonElement.classList.add(validationConfig.inactiveButtonClass);\n    } else {\n      buttonElement.removeAttribute(\"disabled\");\n      buttonElement.classList.remove(validationConfig.inactiveButtonClass);\n    }\n  };\n\n  function checkInputValidity (formElement, inputElement, validationConfig) {\n    if (inputElement.validity.patternMismatch) {\n      inputElement.setCustomValidity(inputElement.dataset.errorMessage);\n    } else {\n      inputElement.setCustomValidity('');\n    }\n      if (!inputElement.validity.valid) {\n      showInputError(formElement, inputElement, validationConfig);\n    } else {\n      hideInputError(formElement, inputElement, validationConfig);\n    }\n  };\n\n  function setEventListeners (formElement, validationConfig) {\n    const inputList = Array.from(formElement.querySelectorAll(validationConfig.inputSelector));\n    const buttonElement = formElement.querySelector(validationConfig.submitButtonSelector);\n    inputList.forEach((inputElement) => {\n      inputElement.addEventListener('input', function () {\n        checkInputValidity(formElement, inputElement, validationConfig);\n        toggleButtonState(inputList, buttonElement, validationConfig);\n      });\n    });\n  };\n\nexport  function enableValidation (validationConfig) {\n    const formList = Array.from(document.querySelectorAll(validationConfig.formSelector));\n    formList.forEach((formElement) => {\n      formElement.addEventListener('submit', function (evt) {\n        evt.preventDefault();\n      });\n      setEventListeners(formElement, validationConfig);\n    });\n  };\n\nexport  function clearValidation (formElement, validationConfig) {\n    const inputList = Array.from(formElement.querySelectorAll(validationConfig.inputSelector));\n    const buttonElement = formElement.querySelector(validationConfig.submitButtonSelector);\n    inputList.forEach((inputElement) =>\n      hideInputError(formElement, inputElement, validationConfig)\n    );\n    toggleButtonState(inputList, buttonElement, validationConfig);\n  };\n","export const config = {\n  baseUrl: \"https://nomoreparties.co/v1/wff-cohort-17\",\n  headers: {\n    authorization: \"eedbd58f-f39c-41fc-bc71-e4b882bd41d1\", //myId\n    \"Content-Type\": \"application/json\",\n  },\n};\n\nexport const getResponse = (res) => {\n  if (res.ok) {\n    return res.json();\n  }\n  // если ошибка, отклоняем промис\n  return Promise.reject(`Ошибка: ${res.status}`);\n};\n\n//получить карточки с сервера\nexport const getInitialCards = () => {\n  return fetch(`${config.baseUrl}/cards`, {\n    headers: config.headers,\n  })\n  .then(getResponse)\n  .then((data) => {\n    return data;\n  })\n};\n\n//получить данные о пользователе с сервера\nexport const getUser = () => {\n  return fetch(`${config.baseUrl}/users/me`, {\n    headers: config.headers,\n  })\n    .then(getResponse)\n    .then((data) => {\n      return data;\n    })\n};\n\n// Удаление карточки по идентификатору\nexport const deleteCardId = (id) => {\n  return fetch(`${config.baseUrl}/cards/` + `${id}`, {\n    method: \"DELETE\",\n    headers: config.headers,\n  })\n  .then(getResponse)\n};\n\n// Обновление информации о пользователе\nexport const patchUser = (name, about) => {\n  return fetch(`${config.baseUrl}/users/me`, {\n    method: \"PATCH\",\n    headers: config.headers,\n    body: JSON.stringify({\n      name,\n      about,\n    }),\n  })\n  .then(getResponse)\n};\n\n//добавление новой карточки\nexport const postCard = (name, link) => {\n  return fetch(`${config.baseUrl}/cards`, {\n    method: \"POST\",\n    headers: config.headers,\n    body: JSON.stringify({\n      name,\n      link,\n    }),\n  })\n  .then(getResponse)\n};\n\n// Добавление лайка карточке\nexport const addLikeCard = (id) => {\n  return fetch(`${config.baseUrl}/cards/likes/` + `${id}`, {\n    method: \"PUT\",\n    headers: config.headers,\n  })\n  .then(getResponse)\n}\n\n\n// Удаление лайка с карточки\nexport const deleteLikeCard = (id) => {\n  return fetch(`${config.baseUrl}/cards/likes/` + `${id}`, {\n    method: \"DELETE\",\n    headers: config.headers,\n  })\n  .then(getResponse)\n}\n\n// Обновление аватара пользователя\nexport const patchAvatar = (avatar) => {\n  return fetch(`${config.baseUrl}/users/me/avatar`, {\n    method: \"PATCH\",\n    headers: config.headers,\n    body: JSON.stringify({ avatar: avatar }),\n  })\n  .then(getResponse)\n};\n\n//ux\nconst renderLoading = ({ buttonElement, isLoading }) => {\n  if (isLoading) {\n    buttonElement.textContent = \"Сохранение...\";\n  } else {\n    buttonElement.textContent = \"Сохранить\";\n  }\n};\n","import \"./pages/index.css\";\nimport { openPopup, closePopup } from \"./components/modal.js\";\nimport { createCard, putLike } from \"./components/card.js\";\nimport {\n  validationConfig,\n  enableValidation,\n  clearValidation,\n} from \"./components/validation.js\";\nimport {\n  getUser,\n  getInitialCards,\n  postCard,\n  patchUser,\n  deleteCardId,\n  patchAvatar,\n  deleteLikeCard,\n  addLikeCard\n} from \"./components/api.js\";\n\nconst placesList = document.querySelector(\".places__list\");\n\nconst popupEditElement = document.querySelector(\".profile__edit-button\");\nconst popupAddElement = document.querySelector(\".profile__add-button\");\nconst popupEditContent = document.querySelector(\".popup_type_edit\");\nconst popupAddContent = document.querySelector(\".popup_type_new-card\");\n\nconst popupImage = document.querySelector(\".popup_type_image\");\nconst popupImageCaption = popupImage.querySelector(\".popup__caption\");\nconst popupImagePicture = popupImage.querySelector(\".popup__image\");\n\nconst formCardElement = document.forms[\"new-place\"];\nconst buttonSavePlace = formCardElement.querySelector(\".popup__button\");\nconst nameInput = document.querySelector(\".popup__input_type_name\");\nconst jobInput = document.querySelector(\".popup__input_type_description\");\n\nconst formPersonElement = document.forms[\"edit-profile\"];\nconst cardNameInput = document.querySelector(\".popup__input_type_card-name\");\nconst cardUrlInput = document.querySelector(\".popup__input_type_url\");\nconst buttonSaveProfile = formPersonElement.querySelector(\".popup__button\");\n\n\nconst profileTitle = document.querySelector(\".profile__title\");\nconst profileDescription = document.querySelector(\".profile__description\");\nconst avatarImageButton = document.querySelector(\".profile__image\");\nconst popupAvatar = document.querySelector(\".popup_type_new-avatar\");\nconst avatarInput = document.querySelector('input[name=\"link_avatar\"]');\n\n\nconst formDeleteCard = document.forms[\"delete-card\"];\nconst formDeleteCardButton = formDeleteCard.querySelector(\".popup__button\");\nconst popupDelete = document.querySelector(\".popup_type_delete-card\");\n\nconst formAvatarElement = document.forms[\"new-avatar\"];\nconst buttonAvatarSave = formAvatarElement.querySelector(\".popup__button\");\n\nlet userId = \"\";\n\n// Объект с колбэками для работы с событиями карточек\nconst callbacksObject = {\n  likeCallback: putLike,\n  deleteCardCallback: deleteCard,\n  openImageCallback: openImagePopup,\n  openDeletePopupCallBack: openDeletePopup, // was openPopup,\n  deleteLikeCard: deleteLikeCard,\n  addLikeCard: addLikeCard,\n}\n\n// Функция открытия модального окна с изображением карточки\nfunction openImagePopup(cardName, cardLink) {\n  popupImagePicture.src = cardLink;\n  popupImagePicture.alt = cardName;\n  popupImageCaption.textContent = cardName;\n  openPopup(popupImage);\n}\n\n//удалить карточку по id\nfunction deleteCard(cardElement, _id) {\n  deleteCardId(_id)\n    .then(() => {\n      cardElement.remove();\n      closePopup(popupDelete);\n    })\n    .catch((err) => {\n      console.error(\"Ошибка при удалении карточки:\", err);\n    });\n}\n\nfunction openDeletePopup(cardElement, cardId) {\n  formDeleteCardButton.cardElement = cardElement;\n  formDeleteCardButton.cardId = cardId;\n  openPopup(popupDelete);\n}\n\n// Слушатель подтверждения удаления карточки по id\nformDeleteCardButton.addEventListener(\"click\", () => {\n  deleteCard(formDeleteCardButton.cardElement, formDeleteCardButton.cardId);\n});\n\n//запрос на сервер данных Profile и отобразить их при загрузке страницы;\nconst updateProfileData = (data) => {\n  profileTitle.textContent = data.name;\n  profileDescription.textContent = data.about;\n  userId = data._id;\n  avatarImageButton.style.backgroundImage = `url(${data.avatar})`;\n}\n\n//ф-ия смены имени и описания профиля\nfunction changeProfileFormSubmit(evt) {\n  evt.preventDefault(); // Эта строчка отменяет стандартную отправку формы.\n  const currentName = profileTitle.textContent;\n  const currentAbout = profileDescription.textContent\n  loading(buttonSaveProfile, true);\n  const name = (profileTitle.textContent = nameInput.value);\n  const about = (profileDescription.textContent = jobInput.value);\n  patchUser(name, about)\n    .then((dataUser) => {\n      // Обновление отображаемых данных профиля на странице\n      profileTitle.textContent = dataUser.name;\n      profileDescription.textContent = dataUser.about;\n      closePopup(popupEditContent);\n    })\n    .catch((err) => {\n      console.error(\"Ошибка при обновлении профиля:\", err);\n      profileTitle.textContent = currentName;\n      profileDescription.textContent = currentAbout;\n    })\n    .finally(() => {\n      loading(buttonSaveProfile, false);\n    });\n}\n\n//ф-я добавления новой карточки по ссылке\nfunction addCardFormSubmit(evt) {\n  evt.preventDefault();\n  loading(buttonSavePlace, true);\n  const cardNameValue = cardNameInput.value;\n  const cardUrlValue = cardUrlInput.value;\n  //отправить на сервер и вернуть данные карточки\n  postCard(cardNameValue, cardUrlValue)\n    .then((dataCard) => {\n      placesList.prepend(createCard(dataCard, callbacksObject, userId));\n      closePopup(popupAddContent);\n    })\n    .catch((err) => {\n      console.error(\"Ошибка при добавлении карточки:\", err);\n    })\n    .finally(() => {\n      loading(buttonSavePlace, false);\n    });\n}\n\n//вывод карточек с сервера\nconst renderCards = (dataCards) => {\n  dataCards.forEach((item) => {\n    placesList.append(createCard(item, callbacksObject, userId));\n  });\n}\n\n//слушатель - изменение описания профиля\nformPersonElement.addEventListener(\"submit\", function (evt) {\n  changeProfileFormSubmit(evt);\n});\n\n//слушатель - добавление карточки по ссылке\nformCardElement.addEventListener(\"submit\", addCardFormSubmit);\n\n//слушатель - открыть попап \"Редактировать профиль\"\npopupEditElement.addEventListener(\"click\", () => {\n  nameInput.value = profileTitle.textContent;\n  jobInput.value = profileDescription.textContent;\n  clearValidation(popupEditContent, validationConfig);\n  openPopup(popupEditContent);\n});\n\n//слушатель - открыть попап \"Новое место\"\npopupAddElement.addEventListener(\"click\", () => {\n  cardNameInput.value = \"\";\n  cardUrlInput.value = \"\";\n  clearValidation(popupAddContent, validationConfig);\n  openPopup(popupAddContent);\n});\n\n// UX\nconst loading = (button, isLoading) => {\n  button.textContent = isLoading ? \"Сохранение...\" : \"Сохранить\";\n}\n\n//слушатель - открыть попап \"Смена аватара\"\navatarImageButton.addEventListener(\"click\", () => {\n  avatarInput.value = \"\";\n  clearValidation(popupAvatar, validationConfig);\n  openPopup(popupAvatar);\n});\n\n//слушатель - изменение аватара\nformAvatarElement.addEventListener(\"submit\", (evt) => {\n  evt.preventDefault();\n  loading(buttonAvatarSave, true);\n  const avatar = avatarInput.value;\n  const currentAvatar = avatarImageButton.style.backgroundImage;\n  patchAvatar(avatar)\n    .then((data) => {\n      avatarImageButton.style.backgroundImage = `url(${data.avatar})`;\n      closePopup(popupAvatar);\n    })\n    .catch((err) => {\n      console.error(\"Ошибка при обновлении аватара:\", err);\n      avatarImageButton.style.backgroundImage = currentAvatar;\n    })\n    .finally(() => {\n      loading(buttonAvatarSave, false);\n    });\n});\n\nPromise.all([getUser(), getInitialCards()])\n  .then((result) => {\n    const user = result[0];\n    userId = user._id;\n    const cards = result[1];\n    updateProfileData(user);\n    renderCards(cards, callbacksObject, user._id);\n  })\n  .catch((err) => {\n    console.error(\"Произошла ошибка при получении данных:\", err);\n  });\n\nenableValidation(validationConfig);\n"],"names":["closePopupByCross","evt","closePopup","target","closest","closePopupByEscape","event","key","document","querySelector","closePopupOverlay","classList","contains","element","remove","removeEventListener","openPopup","add","addEventListener","createCard","item","callbacksObject","userId","openImageCallback","likeCallback","openDeletePopupCallBack","deleteLikeCard","addLikeCard","cardElement","content","cloneNode","cardImage","cardTitle","likeCounter","cardDeleteButton","likeButton","textContent","name","src","link","alt","likes","length","some","likeItem","_id","style","display","owner","validationConfig","formSelector","inputSelector","submitButtonSelector","inactiveButtonClass","inputErrorClass","errorClass","hideInputError","formElement","inputElement","errorElement","concat","id","hasInvalidInput","inputList","validity","valid","toggleButtonState","buttonElement","setAttribute","removeAttribute","clearValidation","Array","from","querySelectorAll","forEach","config","baseUrl","headers","authorization","getResponse","res","ok","json","Promise","reject","status","placesList","popupEditElement","popupAddElement","popupEditContent","popupAddContent","popupImage","popupImageCaption","popupImagePicture","formCardElement","forms","buttonSavePlace","nameInput","jobInput","formPersonElement","cardNameInput","cardUrlInput","buttonSaveProfile","profileTitle","profileDescription","avatarImageButton","popupAvatar","avatarInput","formDeleteCardButton","popupDelete","formAvatarElement","buttonAvatarSave","then","catch","err","console","error","deleteCardCallback","deleteCard","cardName","cardLink","cardId","fetch","method","preventDefault","about","currentName","currentAbout","loading","value","body","JSON","stringify","dataUser","finally","changeProfileFormSubmit","dataCard","prepend","button","isLoading","avatar","currentAvatar","backgroundImage","patchAvatar","data","all","result","user","dataCards","cards","append","patternMismatch","setCustomValidity","dataset","errorMessage","validationMessage","showInputError","checkInputValidity","setEventListeners","enableValidation"],"sourceRoot":""}